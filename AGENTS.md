# MCP保修姬

## 1.1 项目名称

**MCP保修姬** —— 你的智能电子保修卡管家

## 1.2 项目简介

基于 **Python FastMCP + FastAPI** 的"电子保修卡管理系统"，支持图片识别录入保修信息、快速查询、保修倒计时计算与过期产品筛选，方便用户后续维保与资产管理。

### 技术栈

| 层级 | 技术选型 | 说明 |
|------|---------|------|
| AI 能力层 | FastMCP (Model Context Protocol) | 通过 MCP 协议对接大模型，实现图片识别与结构化提取 |
| 后端框架 | FastAPI | 高性能异步 Web 框架，提供 RESTful API |
| 数据存储 | SQLite / JSON 文件 | 轻量级本地存储，零配置开箱即用 |
| 图片识别 | Claude Vision / OCR | 发票、铭牌、截图等多场景图片信息提取 |
| 开发语言 | Python 3.10+ | 类型提示 + 异步编程 |

### 系统架构

```
用户 (MCP Client / Web)
        │
        ▼
┌─────────────────────┐
│   FastAPI 接口层     │  ← RESTful API + MCP Server
├─────────────────────┤
│   业务逻辑层         │  ← 保修管理 / 倒计时 / 日均价值计算
├─────────────────────┤
│   AI 能力层          │  ← FastMCP → Claude Vision (图片识别)
├─────────────────────┤
│   数据持久层         │  ← SQLite / JSON
└─────────────────────┘
```

## 1.3 核心创意

### 1. 拍照即录入 (Snap & Capture)

> 一张图片，搞定所有保修信息录入。

- **智能识别**：支持多种图片来源——购物发票、产品铭牌、电商订单截图、保修卡照片，一张图搞定。
- **一键结构化**：AI 自动提取并填充以下字段，告别手动输入：
  - 产品品牌 (Brand)
  - 产品型号 (Model)
  - 序列号/SN码 (Serial Number)
  - 购买日期 (Purchase Date)
  - 保修时长 (Warranty Period)
  - 购买价格 (Price)
- **容错处理**：识别结果不完整时，提示用户补充关键信息；支持手动修正识别结果。

### 2. 保修倒计时 (Smart Countdown)

> 每件产品的保修状态，心中有数。

- **自动计算**：根据购买日期 + 保修时长，自动推算保修到期日。
- **剩余天数**：实时显示距离保修到期还剩多少天，一目了然。
- **状态标识**：
  - 🟢 **在保** — 保修期内，安心使用
  - 🟡 **临期** — 即将过保（如 30 天内），提醒关注
  - 🔴 **过保** — 已超出保修期
- **临期提醒**：在保/过保状态自动切换，关键时刻不掉链子。支持自定义临期阈值（默认 30 天）。

### 3. 日均"身价"分析 (Daily Value Insight)

> 每一分钱花得值不值，算一算就知道。

- **消费洞察**：量化每件产品的使用价值，这就叫"物尽其用"。
- **算法逻辑**：
  ```
  日均价值 = 购入价格 ÷ 已使用天数
  ```
  - 例：一台 ¥6000 的笔记本，用了 600 天 → 日均 ¥10
  - 例：一副 ¥200 的耳机，用了 20 天 → 日均 ¥10
- **决策辅助**：
  - 按日均价值排序，直观对比各产品的性价比
  - 帮助判断：哪些东西买得值？哪些产品利用率低？
  - 为未来消费决策提供数据参考

### 4. 秒级定位 (Quick Search)

> 找得到、查得快、筛得准。

- **多维搜索**：支持按品牌、型号、序列号等关键词模糊搜索，随叫随到。
- **智能筛选**：
  - 一键筛选"即将过期"设备，精准处理维保事宜
  - 按保修状态筛选（在保 / 临期 / 过保）
  - 按品牌、品类分组查看
- **排序支持**：按购买日期、到期日期、日均价值等多维度排序。

## 1.4 目标用户与应用场景

### 目标用户

| 用户群体 | 典型需求 |
|---------|---------|
| **普通消费者/家庭** | 手机、家电、电脑、相机等多设备保修信息分散、容易丢，需要统一管理 |
| **数码爱好者** | 设备多、换得勤，需要跟踪每台设备的保修状态和使用价值 |
| **小型团队/工作室** | 办公设备、生产工具的资产与保修集中管理 |
| **自由职业者** | 摄影器材、笔记本等生产力工具的保修跟踪 |

### 应用场景

1. **新设备入库**：买了新手机，拍一张发票照片 → 自动录入品牌、型号、SN码、保修期。
2. **保修查询**：家里洗衣机坏了 → 搜索"洗衣机"，秒查是否还在保修期内。
3. **临期预警**：笔记本电脑即将过保 → 系统自动标记，提醒用户决定是否购买延保。
4. **消费复盘**：年终盘点 → 按日均价值排序，看看哪些东西买得值，哪些吃灰了。
5. **资产管理**：搬家/换工作 → 一键查看所有设备清单及保修状态，心中有数。

## 1.5 MCP 工具设计 (预览)

| MCP Tool | 功能描述 |
|----------|---------|
| `extract_warranty_from_image` | 接收图片，调用 AI 识别并返回结构化保修信息 |
| `add_warranty_record` | 新增一条保修记录 |
| `query_warranty` | 按关键词查询保修记录 |
| `get_warranty_countdown` | 获取指定产品的保修倒计时信息 |
| `list_expiring_soon` | 列出即将过保的产品（可配置天数阈值） |
| `calculate_daily_value` | 计算产品日均价值并排序 |
| `delete_warranty_record` | 删除指定保修记录 |
| `update_warranty_record` | 更新/修正保修记录信息 |
